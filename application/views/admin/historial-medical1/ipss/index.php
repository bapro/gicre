<div class="modal-header "  id="background_">
<button type="button" title="Cierra" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times-circle"  style="font-size:48px;color:red"></i></button>
<h3 class="h3 his_med_title">IPSS</h3>
</div>
<div class="modal-body" id="background_">
  <div id="paginationIpss"></div>
  <hr class="prenatal-separator"/>
<button class="btn btn-xs btn-primary" id="nuevo-ipss">NUEVO REGISTRO</button>
  <hr class="prenatal-separator"/>
<div id="content-ipss"></div>
 <div id="hide-table-ipss">
<table class='table table-striped'>
<tr>
<td></td>
<td>Ninguna</td>
<td>Menos de 1 vez de cada 5</td>
<td>Menos de la midad de las veces</td>
<td>Aproximadamente la mitad de las veces</td>
<td>Más de la mitad de las veces</td>
<td>Casi siempre</td>
</tr>
<tr id='click1'>
<td id='not1'>
1. Durante más o menos los últimos 30 días
cuántas veces a tenido la sensación de no vaciar
completamente la vejiga al terminar de orinar?
</td>
<td>0 <input  type='radio' name='tr1-0' class='trCheck' value="0"  /></td>
<td>1 <input  type='radio' name='tr1-0' class='trCheck' value="1"  /></td>
<td>2 <input  type='radio' name='tr1-0' class='trCheck' value="2" /></td>
<td>3 <input  type='radio' name='tr1-0' class='trCheck' value="3"  /></td>
<td>4 <input  type='radio' name='tr1-0' class='trCheck' value="4" /></td>
<td>5 <input  type='radio' name='tr1-0' class='trCheck' value="5"  /></td>

</tr>
<tr>
<td>
2- Durante más o menos los últimos 30 días,
 cuántas veces ha tenido que volver a orinar en las dos horas
 siguientes despues de haber orinado?
</td>
<td>0 <input  type='radio' name='tr2-1' class='trCheck' value="0"/></td>
<td>1 <input  type='radio' name='tr2-1' class='trCheck' value="1" /></td>
<td>2 <input  type='radio' name='tr2-1' class='trCheck' value="2" /></td>
<td>3 <input  type='radio' name='tr2-1' class='trCheck' value="3" /></td>
<td>4 <input  type='radio' name='tr2-1' class='trCheck' value="4" /></td>
<td>5 <input  type='radio' name='tr2-1' class='trCheck' value="5" /></td>

</tr>
<tr>
<td>
3- Durante más o menos los últimos 30 días,
cuántas veces ha notado que, al orinar, paraba y comenzaba
de nuevo varias veces?
</td>
<td>0 <input  type='radio' name='tr3-2' class='trCheck' value='0' /></td>
<td>1 <input  type='radio' name='tr3-2' class='trCheck' value='1'/></td>
<td>2 <input  type='radio' name='tr3-2' class='trCheck' value='2' /></td>
<td>3 <input  type='radio' name='tr3-2' class='trCheck' value='3'/></td>
<td>4 <input  type='radio' name='tr3-2' class='trCheck' value='4'/></td>
<td>5 <input  type='radio' name='tr3-2' class='trCheck' value='5'/></td>

</tr>
<tr>
<td>4- Durante más o menos los últimos 30 días,
cuántas veces ha tenido dificultad para aguantarse la ganas de orinar?
</td>
<td>0 <input  type='radio' name='tr4-3' class='trCheck' value='0' /></td>
<td>1 <input  type='radio' name='tr4-3' class='trCheck' value='1'/></td>
<td>2 <input  type='radio' name='tr4-3' class='trCheck' value='2'/></td>
<td>3 <input  type='radio' name='tr4-3' class='trCheck' value='3' /></td>
<td>4 <input  type='radio' name='tr4-3' class='trCheck' value='4'/></td>
<td>5 <input  type='radio' name='tr4-3' class='trCheck' value='5' /></td>

</tr>
<tr>
<td>5- Durante más o menos los últimos 30 días,
cuántas veces ha observado que el chorro de orina es poco fuerte?
</td>
<td>0 <input  type='radio' name='tr5-4' class='trCheck' value='0'/></td>
<td>1 <input  type='radio' name='tr5-4' class='trCheck' value='1' /></td>
<td>2 <input  type='radio' name='tr5-4' class='trCheck' value='2' /></td>
<td>3 <input  type='radio' name='tr5-4' class='trCheck' value='3' /></td>
<td>4 <input  type='radio' name='tr5-4' class='trCheck' value='4' /></td>
<td>5 <input  type='radio' name='tr5-4' class='trCheck' value='5' /></td>

</tr>
<tr>
<td>
6- Durante más o menos los últimos 30 días,
cuántas veces ha tenido que apretar o hacer fuerza para comenzar 
a orinar?
</td>
<td>0 <input  type='radio' name='tr6-5' class='trCheck'  value='0'/></td>
<td>1 <input  type='radio' name='tr6-5' class='trCheck'  value='1'/></td>
<td>2 <input  type='radio' name='tr6-5' class='trCheck' value='2' /></td>
<td>3 <input  type='radio' name='tr6-5' class='trCheck' value='3' /></td>
<td>4 <input  type='radio' name='tr6-5' class='trCheck' value='4' /></td>
<td>5 <input  type='radio' name='tr6-5' class='trCheck' value='5' /></td>
</tr>
<tr>
<td>
7- Durante más o menos los últimos 30 días,
cuántas veces suele tener que levantarse para orinar desde que se va a la cama 
por la noche haste que se levanta por la mañana.

</td>
<td>0 <input  type='radio' name='tr7-6' class='trCheck' value='0' /></td>
<td>1 <input  type='radio' name='tr7-6' class='trCheck' value='1' /></td>
<td>2 <input  type='radio' name='tr7-6' class='trCheck' value='2' /></td>
<td>3 <input  type='radio' name='tr7-6' class='trCheck' value='3' /></td>
<td>4 <input  type='radio' name='tr7-6' class='trCheck' value='4' /></td>
<td>5 <input  type='radio' name='tr7-6' class='trCheck' value='5' /></td>
</tr>
<tr>
<td style='text-align:right'>
<h4>PUNTUACION IPS TOTAL</h4>
</td>
<td colspan='7'>
<p id='ipss-result'></p>
<input id='ipss-color' type='hidden'/>
</td>
</tr>
</table>
<table class='table'>
<tr>
<td>
8- Como se sentira si tuviera que pasar el resto de la vida con los sintomás
prostaticos tal y como los siente ahora?

</td>
<td>0 <input  type='radio' name='tr8' class='trCheck8' value='0' /></td>
<td>1 <input  type='radio' name='tr8' class='trCheck8' value='1' /></td>
<td>2 <input  type='radio' name='tr8' class='trCheck8' value='2' /></td>
<td>3 <input  type='radio' name='tr8' class='trCheck8' value='3' /></td>
<td>4 <input  type='radio' name='tr8' class='trCheck8' value='4' /></td>
<td>5 <input  type='radio' name='tr8' class='trCheck8' value='5' /></td>
<td>6 <input  type='radio' name='tr8' class='trCheck8' value='6' /></td>
</tr>
<tr>
<td>
  <button type="button" id="save-ipps" class="btn btn-md btn-success"><i class="fa fa-check after-ipps" style="display:none;color:blue;font-size:30px;position:absolute"></i> GUARDAR</button>
<a id="imprimir-ipps" style="display:none"  class="btn btn-md btn-primary"  target="_blank" href="<?php echo base_url("printings/print_if_foto_c/new_ipss/$id_historial/$user_id/$centro_medico/ipps")?>"  ><i class="fa fa-print"></i> Imprimir</a>
  
</td>
</tr>
</table>

 </div>


</div>
<script>

function calcscore(){
    var score = 0,text, color;
    $(".trCheck:checked").each(function(){
        score+=parseInt($(this).val(),10);
    });
	
	 if(score <=7){
		text= score+ ' | 0-7: obstruccion urinaria leve (requiere dar seguimiento al problema)'; 
     color='green';		
	  }else if(score >7 && score <=18){
		  text=score+ ' | 8-18: obstruccion urinaria moderada (requiere tratamiento medico con alfa bloqueadores o inhibidor de la cinco-alfa-reductasa)'; 
	  color='#ceaf18';
	  }
	  
	  else if(score > 18 && score <=35){
		  text=score+ ' | 19-35: obstruccion urinaria severa (requiere tratamiento quirurgico)'; 
		  color='red';
	  }
	  $("#ipss-color").val(color);
	
 $("#ipss-result").text(text).css('color',color).css('font-weight','bold');
}


$().ready(function(){
    $(".trCheck").change(function(){
        calcscore()
    });
});


//-------------------------------------------------------------------------------------------------------------


function paginationIpss(){
$.ajax({
url:"<?php echo base_url(); ?>admin_medico/paginationIpss",
data: {id_user:<?=$user_id?>,id_patient:<?=$id_historial?>,centro_medico:<?=$centro_medico?>},
method:"POST",
success:function(data){
$('#paginationIpss').html(data);
},
 error: function(jqXHR, textStatus, errorThrown) {
alert('An error occurred... Look at the console (F12 or Ctrl+Shift+I, Console tab) for more information!');

$('#paginationIpss').html('<p>status code: '+jqXHR.status+'</p><p>errorThrown: ' + errorThrown + '</p><p>jqXHR.responseText:</p><div>'+jqXHR.responseText + '</div>');
console.log('jqXHR:');
console.log(jqXHR);
console.log('textStatus:');
console.log(textStatus);
console.log('errorThrown:');
console.log(errorThrown);
},
});
}

paginationIpss();


//--------------------------------------------------------------------------------------------------------------------

$('#save-ipps').on('click', function(event) {
	event.preventDefault();
var tr1_0 = $('input:radio[name=tr1-0]:checked').val();
var tr2_1 = $('input:radio[name=tr2-1]:checked').val();
var tr3_2 = $('input:radio[name=tr3-2]:checked').val();
var tr4_3 = $('input:radio[name=tr4-3]:checked').val();
var tr5_4 = $('input:radio[name=tr5-4]:checked').val();
var tr6_5 = $('input:radio[name=tr6-5]:checked').val();
var tr7_6 = $('input:radio[name=tr7-6]:checked').val();
var tr8 = $('input:radio[name=tr8]:checked').val();
var result = $('#ipss-result').text();
var ipsscolor = $('#ipss-color').val();
$.ajax({
url:"<?php echo base_url(); ?>admin_medico/saveIPPS",
data: {tr1_0:tr1_0,tr2_1:tr2_1,tr3_2:tr3_2,tr4_3:tr4_3,tr5_4:tr5_4,tr6_5:tr6_5,tr7_6:tr7_6,tr8:tr8,id_user:<?=$user_id?>,histoirial_id:<?=$id_historial?>,idipss:0,result:result,ipsscolor:ipsscolor},
method:"POST",
success:function(data){
paginationIpss();
$('.trCheck8').prop('checked', false);
$('.trCheck').prop('checked', false);
  $('.after-ipps').fadeIn('slow', function(){
    $('.after-ipps').delay(3000).fadeOut();
    });
$('#imprimir-ipps').show();
$('#save-ipps').prop("disabled",true);

},
 
});

});
</script>
