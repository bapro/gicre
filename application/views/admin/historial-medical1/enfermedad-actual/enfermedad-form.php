<br><style>.btn-select-file{border-radius:20px}.thumb{margin:24px 5px 20px 0;width:150px;float:left}#blah{border:2px solid;display:block;background-color:#fff;border-radius:5px}</style><h4 class="h4 his_med_title">Historia de la enfermedad actual <em style='text-transform:lowercase'><?=$count_enf?> registro(s)</em></h4><?php if($count_enf>0){ ?><div id="paginationh"><ul class="paginationh"><?php $i=1;foreach($enfermedad as $row){if($row->laboratorios==""){$lab="";}else{$lab="<strong><u>LABORATORIOS (Resultados relevantes)</u></strong> $row->laboratorios<br/>";}if($row->estudios==""){$est="";}else{$est="<strong><u>ESTUDIOS (Resultados relevantes)</u></strong> $row->estudios";}$img=$this->db->select('image')->where('id_enfermedad',$row->id_enf)->get('saveEnfImage')->row('image');if($img==""){$enimg="";}else{$enimg="<br/><span style='color:red'>Hay imagen</span>";}$user_c14=$this->db->select('name')->where('id_user',$row->inserted_by)->get('users')->row('name');$user_c15=$this->db->select('name')->where('id_user',$row->updated_by)->get('users')->row('name');$inserted_time=date("d-m-Y H:i:s",strtotime($row->inserted_time));$updated_time=date("d-m-Y H:i:s",strtotime($row->updated_time));$centro=$this->db->select('name')->where('id_m_c',$row->centro_medico)->get('medical_centers')->row('name'); ?><li class="paninate-li"><a data-html="true"data-placement="bottom"data-target="#ver_enf_act"data-toggle="modal"data-trigger="hover"href="<?php echo base_url("admin_medico/show_enfermedad/$row->id_enf/$user_id/$row->centro_medico") ?>"rel="tooltip"title="
<h4 style='color:green'><?=$centro?></h4><strong>Creado por</strong> <?=$user_c14?><br/>
<strong>Cambiado por</strong> <?=$user_c15?>,<?=$updated_time?>"><?=$inserted_time?></a></li><?php } ?></ul></div><?php }else{echo "<i><b>No hay registros</b></i>";} ?><div class="col-md-12 form-horizontal"id="flashe"><hr class="prenatal-separator"><div class="form-group"><label class="control-label col-md-2"><span style="color:red"><strong>*</strong></span> Motivo de consulta</label><div class="col-md-10"><select class="form-control causa select2"id="enf_motivo"name="enf_motivo"></select></div></div><div class="form-group"><?php if($area==90){$trastorno="Clacificacion de mallampati I-II-III-IV, Escala somnolencia Epworth  xx/24 <br/>\nCuestoniario apnea Stop Bang  xx/8";}else{$trastorno="";} ?><label class="control-label col-md-2"><span style="color:red"><strong>*</strong></span> Sinopsis</label><div class="col-md-10"><button class="btn btn-primary btn-sm"id="btnSpeechEnfSig"type="button"title="soporte solo para el navegador Chrome"><i aria-hidden="true"class="fa fa-microphone"></i></button> <span id="actionSpeechEnfSig"></span> <textarea class="form-control required-patient-inputs "id="enf_signopsis"rows="6"><?=$trastorno?></textarea> <span id="copiar-estudios-div"style="display:none"><input type="checkbox"id="copiar-estudios"> Repetir En Estudios</span></div></div><div class="form-group"><label class="control-label col-md-2">Laboratorios (Resultados relevantes)</label><div class="col-md-10"><button class="btn btn-primary btn-sm"id="btnSpeechEnfLab"type="button"title="soporte solo para el navegador Chrome"><i aria-hidden="true"class="fa fa-microphone"></i></button> <span id="actionSpeechEnfLab"></span> <textarea class="form-control required-patient-inputs "id="enf_laboratorios"rows="6"></textarea></div></div><div class="form-group"><label class="control-label col-md-2">Estudios (Resultados relevantes)</label><div class="col-md-10"><button class="btn btn-primary btn-sm"id="btnSpeechEnfEst"type="button"title="soporte solo para el navegador Chrome"><i aria-hidden="true"class="fa fa-microphone"></i></button> <span id="actionSpeechEnfEst"></span> <textarea class="form-control required-patient-inputs "id="enf_estudios"rows="6"></textarea></div></div><div class="form-group"><label class="control-label col-sm-2">Estudio Imagen</label><div class="col-md-10"><div class="alert alert-success"id="divMsg"style="display:none"><strong>Guardados con exito</strong></div><br><br><div class="row"id="blah"><form enctype="multipart/form-data"id="uploadimgenf"method="post"><div class="form-control col-md-12"><input type="file"name="file_m_enf"accept=".png, .jpg, .jpeg"class="file_m_enf"id="file_m_enf"><br><br><button class="btn btn-primary btn-sm"id="btn-send-ac"type="submit"style="display:none">Guardar la imagen</button> <em id="guardando"></em> <input type="hidden"name="pat-enf-img"value="<?=$id_historial?>"> <input type="hidden"name="user-enf-img"value="<?=$user_id?>"><br><div id="uploadPreview"></div></div></form></div></div></div></div><div id="resultimg"></div>
<script>
function loadMotivoConsulta(){$.ajax({url:"<?php echo base_url(); ?>admin_medico/loadMotivoConsulta",data:{enf_motivo:"<?=$enf_motivo?>"},method:"POST",success:function(e){$("#enf_motivo").html(e)}})}$('[rel="tooltip"]').tooltip();var btnSpeechEnfSig=document.getElementById("btnSpeechEnfSig");btnSpeechEnfSig.onclick=function(){var e=document.getElementById("enf_signopsis"),t=document.getElementById("actionSpeechEnfSig");runSpeechRecognition(e,t)};var btnSpeechEnfLab=document.getElementById("btnSpeechEnfLab");btnSpeechEnfLab.onclick=function(){var e=document.getElementById("enf_laboratorios"),t=document.getElementById("actionSpeechEnfLab");runSpeechRecognition(e,t)};var btnSpeechEnfEst=document.getElementById("btnSpeechEnfEst");function readImage(e){var t=new FileReader,n=new Image;t.readAsDataURL(e),t.onload=function(t){n.src=t.target.result,n.onload=function(){this.width,this.height,e.type,e.name,e.size;$("#uploadPreview").append('<img src="'+this.src+'" class="thumb">')},n.onerror=function(){alert("Invalid file type: "+e.type)}}}btnSpeechEnfEst.onclick=function(){var e=document.getElementById("enf_estudios"),t=document.getElementById("actionSpeechEnfEst");runSpeechRecognition(e,t)},$("#uploadimgenf").on("submit",(function(e){e.preventDefault(),$.ajax({url:"<?php echo base_url();?>admin_medico/saveEnfImage",type:"post",data:new FormData(this),processData:!1,contentType:!1,cache:!1,async:!1,success:function(e){$("#divMsg").show(),setTimeout((function(){$("#divMsg").hide()}),3e3),$("#file_m_enf").val(""),$("#btn-send-ac").hide(),$("#guardando").text("")},error:function(e,t,n){alert("An erroroccurred... Look at the console (F12 or Ctrl+Shift+I, Console tab) for more information!"),$("#resultimg").html("<p>statuscode: "+e.status+"</p><p>errorThrown: "+n+"</p><p>jqXHR.responseText:</p><div>"+e.responseText+"</div>"),console.log("jqXHR:"),console.log(e),console.log("textStatus:"),console.log(t),console.log("errorThrown:"),console.log(n)}})})),$(document).on("click",".thumb",(function(e){$(this).remove(),$("#file_m_enf").prop("disabled",!1)})),$("#file_m_enf").change((function(e){if(this.disabled)return alert("File upload not supported!");var t=this.files;if(t&&t[0])for(var n=0;n<t.length;n++)readImage(t[n]),$("#btn-send-ac").show()}));const fileBlocks=document.querySelectorAll(".file-block"),buttons=document.querySelectorAll(".btn-select-file");[...buttons].forEach((function(e){e.onclick=function(){e.parentElement.querySelector('input[type="file"]').click()}})),[...fileBlocks].forEach((function(e){e.querySelector('input[type="file"]').onchange=function(){const t=this.files[0].name;$("#btn-send-ac").show(),e.querySelector(".btn-select-file").textContent=t;$("#file-enf-img")[0].files[0].size;var n=$("#file-enf-img").val().replace(/^.*\./,"");switch(n){case"php":case"html":case"htm":case"asp":case"js":case"css":case"htaccess":e.querySelector(".btn-select-file").textContent="Seleccionar la foto",alert("Esta extension es prohibida : "+n)}}})),$(".pagination").hover((function(){$(this).find(".box-tooltip").show()}),(function(){$(this).find(".box-tooltip").hide()})),$(".select2").select2({tags:!0}),$("#enf_signopsis").keyup((function(e){""!=$("#enf_signopsis").val()?$("#copiar-estudios-div").slideDown():($("#copiar-estudios-div").slideUp(),$("#observaciones").val("")),1==$("#copiar-estudios").prop("checked")?$("#observaciones").val($("#enf_signopsis").val()):0==$("#copiar-estudios").prop("checked")&&$("#observaciones").val("")})),$("#copiar-estudios").click((function(){1==$(this).prop("checked")?$("#observaciones").val($("#enf_signopsis").val()):0==$(this).prop("checked")&&$("#observaciones").val("")}));


</script>