<script>
function capitalizeTheFirstLetterOfEachWord(e){for(var a=e.toLowerCase().split(" "),t=0;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].substring(1);return a.join(" ")}function getDocFac(e){$("#load-fac-div").fadeIn().html('<span style="font-size:10px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>');var a=$("#factura-centro").val();var b=$("#id_user").val();$.ajax({type:"POST",url:"<?php echo site_url('cita/get_doc');?>",data:{id_esp:e,id_centro:a,id_user:b},success:function(e){$("#facturar-doc").prop("disabled",!1),$("#facturar-doc").html(e),$("#load-fac-div").hide()}})}function display_age(){$("#load-time-age").fadeIn().html('<span style="font-size:24px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>');var e=document.getElementById("date_nacer").value,a=document.getElementById("incorect_age"),t=document.getElementById("mirror_field").value,o=new Date(t),n=new Date,i=e.slice(-4),r=new Date,l=r.getFullYear();r.getMonth();if(o>n)a.style.display="block",document.getElementById("date_nacer").value="",document.getElementById("age").value="";else if(i==l){a.style.display="none";var s=o<n?null:"datefrom > dateto!",c=s||n.getMonth()-o.getMonth()+12*(n.getFullYear()-o.getFullYear()),d=(s||Math.floor(c/12),n.getDate()-o.getDate()),p=s||c%12+" mes(es) "+(d>0?d+" día(s)":"");document.getElementById("age").value=p,$("#load-time-age").hide()}else{a.style.display="none";var h=l-i+" año(s)";document.getElementById("age").value=h,$("#load-time-age").hide()}}function get_detail(){$("#picture")[0].files[0].size;var e=$("#picture").val().replace(/^.*\./,"");switch(e){case"png":case"jpeg":case"jpg":$("#divFiles").hide(),$(".photo_location").val("2"),$(".enable-send").prop("disabled",!1);break;default:$("#picture").val(""),$("#divFiles").show(),$("#divFiles").text("Esta extension es prohibida : "+e),$(".enable-send").prop("disabled",!0)}}function getDoc(e){ $('#doctor_dropdown').val(null).trigger('change');$("#doctor_dropdown").select2({placeholder: "SELECCIONAR"});$("#load-time").show();$("#load-time").fadeIn().html('<span style="font-size:10px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>');var a=$("#centro_medico").val();var b=$("#id_user").val();$.ajax({type:"POST",url:"<?php echo site_url('cita/get_doc');?>",data:{id_esp:e,id_centro:a,id_user:b},success:function(e){$("#doctor_dropdown").prop("disabled",!1),$("#doctor_dropdown").html(e),$("#load-time").hide()}})}$("#nombre").on("keyup",function(e){$("#nombre").val(capitalizeTheFirstLetterOfEachWord($("#nombre").val()))}),$(".show-btn-cita").click(function(){$("#orientation").val(0),reloadCausaTitle(0);}),$(".show-btn-fac-amb").click(function(){$("#orientation").val(1)}),$(".show-btn-emergencia").click(function(){$("#orientation").val(2),reloadCausaTitle(2)}),$(".show-btn-hospitalizacion").click(function(){$("#orientation").val(3),reloadCausaTitle(3)}),$("#factura-centro").change(function(){$("#load-fac-div").fadeIn().html('<span style="font-size:10px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>');var e=$(this).val();$.ajax({type:"POST",url:"<?php echo site_url('admin_medico/getcentEsp');?>",data:"id_centro="+e,success:function(e){$("#factura-esp").prop("disabled",!1),$("#factura-esp").val(null).trigger("change"),$("#factura-esp").html(e),$("#load-fac-div").hide()}})}),$.validator.setDefaults({errorElement:"span",errorClass:"help-block",highlight:function(e,a,t){$(e).addClass(a),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,a,t){$(e).removeClass(a),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorPlacement:function(e,a){a.parent(".input-group").length?e.insertAfter(a.parent()):a.hasClass("select2")?e.insertAfter(a.next("span")):e.insertAfter(a)}}),$(document).ready(function(){$(".select2").on("change",function(){$(this).valid()}),$(".select2").select2({placeholder:"SELECCIONAR",allowClear:!0,language:{noResults:function(){return"No hay resultado."}}});$("#sendcita").validate();$(".emergencia").select2({placeholder:"SELECCIONAR",tags:!0})}),$(".form_datetime").datetimepicker({language:"fr",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,format:"dd MM yyyy",linkField:"mirror_field",linkFormat:"dddd",startDate:"1900-01-01"}).on("changeDate",function(e){$(this).focus(),$(this).validate("revalidateField","eventDate")}),$("#dateOfBirth").datetimepicker({format:"DD-MM-YYYY",locale:"es"}).on("dp.change",function(e){$("#mirror_field").val(e.date.format("YYYY-MM-DD")),display_age()}),$(".form_pro").datetimepicker({language:"fr",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,format:"dd MM yyyy - hh:ii:s",linkField:"mirror_pro",linkFormat:"yyyy-mm-dd",startDate:"1900-01-01"}),$(".form_pro").datetimepicker("setDate",new Date),$("#fechaPro").datetimepicker({format:"DD-MM-YYYY",locale:"es",widgetPositioning:{horizontal:"auto",vertical:"bottom"}}).on("dp.change",function(e){$("#weekday").val(e.date.format("dddd"));var a=$("#weekday").val(),t=$("#doctor_dropdown").val(),o=$("#centro_medico").val(),n=$("#fecha_propuesta1").val();""!=a&&""!=t&&""!=o&&""!=n&&($("#horario-info").fadeIn().html('<span style="font-size:10px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>'),$.ajax({type:"POST",url:"<?=base_url('cita/daySelected')?>",data:{day:a,doc:t,fecha_propuesta1:n,centro_medico:o,id_patient:"0"},cache:!0,success:function(e){$("#horario-info").html(e).css("color","red")},error:function(e,a,t){alert("An error occurred... Look at the console (F12 or Ctrl+Shift+I, Console tab) for more information!"),$("#horario-info").html("<p>status code: "+e.status+"</p><p>errorThrown: "+t+"</p><p>jqXHR.responseText:</p><div>"+e.responseText+"</div>"),console.log("jqXHR:"),console.log(e),console.log("textStatus:"),console.log(a),console.log("errorThrown:"),console.log(t)}}))}),$("#centro_medico").change(function(){$("#load-time").fadeIn().html('<span style="font-size:24px" class="glyphicon glyphicon-refresh glyphicon-refresh-animate load"></span>');var e=$("#centro_medico").val();$("#especialidad").val(null).trigger("change"),$("#fecha_propuesta1").prop("disabled",!1),$("#horario-info").html(""),$.ajax({type:"POST",url:"<?php echo site_url('admin_medico/getcentEsp');?>",data:"id_centro="+e,success:function(e){$("#especialidad").prop("disabled",!1),$("#especialidad").html(e),$("#load-time").hide()}})}),$("#doctor_dropdown").change(function(){$("#fecha_propuesta1").prop("disabled",!1),$("#fecha_propuesta1").val(""),$("#horario-info").html("")});
</script>